{"ast":null,"code":"import mongoose from 'mongoose';\n\nconst connectDb = handler => async (req, res) => {\n  if (mongoose.connections[0].readyState) return handler(req, res); // Using new database connection\n\n  await mongoose.connect(process.env.MONGODB_URI, {\n    useNewUrlParser: true,\n    useFindAndModify: false,\n    useCreateIndex: true\n  });\n  return handler(req, res);\n};\n\nexport default connectDb; // import mongoose from 'mongoose';\n// export default async () => {\n//   if (mongoose.connections[0].readyState) return;\n//   // Using new database connection\n//   await mongoose.connect(process.env.LOCAL_DATABASE, {\n//     useNewUrlParser: true,\n//     useFindAndModify: false,\n//     useCreateIndex: true,\n//   });\n// };","map":{"version":3,"sources":["C:/Users/Hp/Desktop/nextjs/middleware/dbMiddleware.js"],"names":["mongoose","connectDb","handler","req","res","connections","readyState","connect","process","env","MONGODB_URI","useNewUrlParser","useFindAndModify","useCreateIndex"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;;AAEA,MAAMC,SAAS,GAAGC,OAAO,IAAI,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/C,MAAIJ,QAAQ,CAACK,WAAT,CAAqB,CAArB,EAAwBC,UAA5B,EAAwC,OAAOJ,OAAO,CAACC,GAAD,EAAMC,GAAN,CAAd,CADO,CAE/C;;AACA,QAAMJ,QAAQ,CAACO,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,WAA7B,EAA0C;AAC9CC,IAAAA,eAAe,EAAE,IAD6B;AAE9CC,IAAAA,gBAAgB,EAAE,KAF4B;AAG9CC,IAAAA,cAAc,EAAE;AAH8B,GAA1C,CAAN;AAKA,SAAOX,OAAO,CAACC,GAAD,EAAMC,GAAN,CAAd;AACD,CATD;;AAWA,eAAeH,SAAf,C,CAgBA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst connectDb = handler => async (req, res) => {\r\n  if (mongoose.connections[0].readyState) return handler(req, res);\r\n  // Using new database connection\r\n  await mongoose.connect(process.env.MONGODB_URI, {\r\n    useNewUrlParser: true,\r\n    useFindAndModify: false,\r\n    useCreateIndex: true,\r\n  })\r\n  return handler(req, res);\r\n}\r\n\r\nexport default connectDb;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import mongoose from 'mongoose';\r\n\r\n// export default async () => {\r\n//   if (mongoose.connections[0].readyState) return;\r\n//   // Using new database connection\r\n//   await mongoose.connect(process.env.LOCAL_DATABASE, {\r\n//     useNewUrlParser: true,\r\n//     useFindAndModify: false,\r\n//     useCreateIndex: true,\r\n//   });\r\n// };\r\n"]},"metadata":{},"sourceType":"module"}