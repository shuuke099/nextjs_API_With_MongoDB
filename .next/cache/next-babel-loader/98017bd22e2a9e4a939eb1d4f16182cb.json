{"ast":null,"code":"import mongoose from 'mongoose';\nconsole.log(process.env.MONGODB_URI);\n\nconst connectDb = handler => async (req, res) => {\n  if (mongoose.connections[0].readyState) return handler(req, res); // Using new database connection\n\n  await mongoose.connect(process.env.LOCAL_DATABASE, {\n    useNewUrlParser: true,\n    useFindAndModify: false,\n    useCreateIndex: true,\n    useUnifiedTopology: true\n  });\n  return handler(req, res);\n};\n\nexport default connectDb; // import mongoose from 'mongoose';\n// export default async () => {\n//   if (mongoose.connections[0].readyState) return;\n//   // Using new database connection\n//   await mongoose.connect(process.env.LOCAL_DATABASE, {\n//     useNewUrlParser: true,\n//     useFindAndModify: false,\n//     useCreateIndex: true,\n//   });\n// };","map":{"version":3,"sources":["C:/Users/Hp/Desktop/nextjs/middleware/dbMiddleware.js"],"names":["mongoose","console","log","process","env","MONGODB_URI","connectDb","handler","req","res","connections","readyState","connect","LOCAL_DATABASE","useNewUrlParser","useFindAndModify","useCreateIndex","useUnifiedTopology"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AACAC,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACC,GAAR,CAAYC,WAAxB;;AACA,MAAMC,SAAS,GAAGC,OAAO,IAAI,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/C,MAAIT,QAAQ,CAACU,WAAT,CAAqB,CAArB,EAAwBC,UAA5B,EAAwC,OAAOJ,OAAO,CAACC,GAAD,EAAMC,GAAN,CAAd,CADO,CAE/C;;AACA,QAAMT,QAAQ,CAACY,OAAT,CAAiBT,OAAO,CAACC,GAAR,CAAYS,cAA7B,EAA6C;AACjDC,IAAAA,eAAe,EAAE,IADgC;AAEjDC,IAAAA,gBAAgB,EAAE,KAF+B;AAGjDC,IAAAA,cAAc,EAAE,IAHiC;AAIjDC,IAAAA,kBAAkB,EAAE;AAJ6B,GAA7C,CAAN;AAMA,SAAOV,OAAO,CAACC,GAAD,EAAMC,GAAN,CAAd;AACD,CAVD;;AAYA,eAAeH,SAAf,C,CAgBA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import mongoose from 'mongoose';\r\nconsole.log(process.env.MONGODB_URI);\r\nconst connectDb = handler => async (req, res) => {\r\n  if (mongoose.connections[0].readyState) return handler(req, res);\r\n  // Using new database connection\r\n  await mongoose.connect(process.env.LOCAL_DATABASE, {\r\n    useNewUrlParser: true,\r\n    useFindAndModify: false,\r\n    useCreateIndex: true,\r\n    useUnifiedTopology: true\r\n  })\r\n  return handler(req, res);\r\n}\r\n\r\nexport default connectDb;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import mongoose from 'mongoose';\r\n\r\n// export default async () => {\r\n//   if (mongoose.connections[0].readyState) return;\r\n//   // Using new database connection\r\n//   await mongoose.connect(process.env.LOCAL_DATABASE, {\r\n//     useNewUrlParser: true,\r\n//     useFindAndModify: false,\r\n//     useCreateIndex: true,\r\n//   });\r\n// };\r\n"]},"metadata":{},"sourceType":"module"}